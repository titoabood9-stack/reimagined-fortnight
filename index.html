<!doctype html>
<html lang="ar">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>محاكاة توعوية — خطر الروابط</title>
<style>
  body{font-family:Tahoma,Arial;direction:rtl;background:#f5f7fb;color:#111;margin:0;padding:18px}
  .card{max-width:900px;margin:14px auto;background:#fff;padding:18px;border-radius:10px;box-shadow:0 6px 20px rgba(20,40,80,.06)}
  h1{margin-top:0;color:#b71c1c}
  .row{display:flex;gap:12px;flex-wrap:wrap}
  button{padding:10px 14px;border-radius:8px;border:0;cursor:pointer}
  .primary{background:#1976d2;color:#fff}
  .accent{background:#4caf50;color:#fff}
  .ghost{background:#fff;border:1px solid #1976d2;color:#1976d2}
  .muted{color:#666;font-size:14px}
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:10px;margin-top:12px}
  .thumb{background:#eee;height:90px;border-radius:6px;display:flex;align-items:center;justify-content:center;overflow:hidden}
  table{width:100%;border-collapse:collapse;margin-top:12px}
  th,td{border:1px solid #e6e6e6;padding:8px;text-align:left;font-size:14px}
  .danger{background:#fff5f5;border-left:4px solid #f44336;padding:10px;margin-top:12px}
  .footer{font-size:13px;color:#666;margin-top:12px}
  input[type=file]{display:none}
  .center{text-align:center}
  .consent{background:#fffbe6;border-left:4px solid #ff9800;padding:12px;margin-bottom:12px}
</style>
</head>
<body>
  <div class="card">
    <h1>تنبيه توعوي — محاكاة خطر الروابط</h1>
    <p class="muted">هذه صفحة محاكاة آمنة لعرض ماذا قد يحدث لو فتح شخص رابط خبيث. لا تحتوي الصفحة على وظائف خبيثة ولا تجمع بيانات أحد بدون موافقة صريحة.</p>

    <!-- Consent -->
    <div id="consentBox" class="consent">
      <strong>موافقة للمحاكاة</strong>
      <p class="muted">هل أنت مالك الجهاز أو عندك موافقة لاستخدام جهازك في تجربة توعوية؟</p>
      <div class="row">
        <button id="btnConsent" class="primary">نعم — أوافق</button>
        <button id="btnDecline" class="ghost">لا — أريد مشاهدة الشرح فقط</button>
      </div>
    </div>

    <!-- Controls -->
    <div id="controls" style="display:none">
      <div class="row">
        <button id="showSim" class="primary">عرض "البيانات المسروقة"</button>
        <button id="useMine" class="accent">استخدم صوري (رفع من الجهاز)</button>
        <label class="ghost" for="fileInput" style="cursor:pointer">رفع صور</label>
        <input id="fileInput" type="file" accept="image/*" multiple />
        <button id="btnRemedy" class="ghost">خطوات سريعة للإصلاح</button>
      </div>

      <div style="margin-top:12px" id="explain" class="muted">
        افتح الرابط واطلع ماذا يمكن أن يحدث — هذه مجرد محاكاة. <br>
        (ملاحظة: رفع الصور اختياري لنموذج العرض؛ لن يتم إرسالها لأحد دون موافقة صريحة).
      </div>

      <!-- Simulated stolen data -->
      <div id="simulation" style="display:none;margin-top:16px">
        <div class="danger"><strong>محاكاة: تم الوصول إلى بياناتك</strong> — هذا مثال توعوي فقط.</div>

        <h3 style="margin-top:12px">صور (مثال)</h3>
        <div id="imgGrid" class="grid">
          <!-- thumbnails will appear here -->
        </div>

        <h3 style="margin-top:12px">سجل المكالمات (مثال)</h3>
        <table id="callsTable">
          <thead><tr><th>الاسم</th><th>الرقم</th><th>النوع</th><th>المدة (ث)</th><th>التاريخ</th></tr></thead>
          <tbody>
            <!-- rows -->
          </tbody>
        </table>

        <div style="margin-top:12px" class="row">
          <button id="btnCloseSim" class="ghost">أغلق العرض</button>
          <button id="btnCopyText" class="primary">انسخ نص التحذير/المشاركة</button>
        </div>
      </div>

      <!-- Remedy panel -->
      <div id="remedy" style="display:none;margin-top:14px">
        <h3>خطوات سريعة عند الشك</h3>
        <ol>
          <li>أغلق المتصفح فوراً.</li>
          <li>افحص التطبيقات المثبتة واحذف أي تطبيق غير معروف.</li>
          <li>تحقق من صلاحيات Device Admin و Accessibility وأوقِف أي مدعوّة.</li>
          <li>غيّر كلمات المرور المهمة وفعل 2FA.</li>
          <li>إن استمرت الشكوك: شغّل Safe Mode أو فكر بإعادة ضبط المصنع بعد نسخ احتياطي.</li>
        </ol>
      </div>

    </div>

    <div class="footer center">
      إعداد توعوي — لا تستخدم لأذية أو اختبار أجهزة غير مرخّص بها.
    </div>
  </div>

<script>
/* ====== بيانات تجريبية وهمية (تقدر تعدلها) ====== */
const fakeCalls = [
  {name:"أبو خالد", number:"+971501234567", type:"واردة", duration:120, date:"2025-09-23 10:12"},
  {name:"أمينة", number:"+971509876543", type:"صادرة", duration:45, date:"2025-09-22 19:30"},
  {name:"رقم مجهول", number:"+971599111222", type:"فائتة", duration:0, date:"2025-09-20 08:05"}
];
const placeholderImages = [
  "data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='400' height='300'><rect width='100%' height='100%' fill='%23e0e0e0'/><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' fill='%23666' font-size='20'>صورة توضيحية</text></svg>",
  "data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='400' height='300'><rect width='100%' height='100%' fill='%23ffe0b2'/><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' fill='%23666' font-size='20'>مثال صورة</text></svg>"
];

/* ====== عناصر DOM ====== */
const consentBox = document.getElementById('consentBox');
const btnConsent = document.getElementById('btnConsent');
const btnDecline = document.getElementById('btnDecline');
const controls = document.getElementById('controls');
const showSim = document.getElementById('showSim');
const simulation = document.getElementById('simulation');
const imgGrid = document.getElementById('imgGrid');
const callsTableBody = document.querySelector('#callsTable tbody');
const btnCloseSim = document.getElementById('btnCloseSim');
const fileInput = document.getElementById('fileInput');
const useMine = document.getElementById('useMine');
const remedy = document.getElementById('remedy');
const btnRemedy = document.getElementById('btnRemedy');
const btnCopyText = document.getElementById('btnCopyText');

/* ====== السلوك ====== */
btnConsent.onclick = () => {
  consentBox.style.display = 'none';
  controls.style.display = 'block';
};
btnDecline.onclick = () => {
  // عرض الشرح فقط (بدون تفعيل المحاكاة)
  consentBox.style.display = 'none';
  controls.style.display = 'block';
  document.getElementById('explain').innerHTML = "<strong>عرض توضيحي فقط:</strong> هذه المحاكاة تعرض مثالًا؛ لا نجري أي وصول إلى جهازك.";
};

showSim.onclick = () => {
  populateSimulation();
  simulation.style.display = 'block';
  window.scrollTo({top: document.body.scrollHeight, behavior:'smooth'});
};

btnCloseSim.onclick = () => {
  simulation.style.display = 'none';
};

btnRemedy.onclick = () => {
  remedy.style.display = remedy.style.display === 'block' ? 'none' : 'block';
  if (remedy.style.display === 'block') window.scrollTo({top: document.body.scrollHeight, behavior:'smooth'});
};

btnCopyText.onclick = () => {
  const text = `تحذير: تم فتح رابط مريب وقد يؤدي إلى تسريب بيانات مثل الصور وسجل المكالمات. إن ظننت تعرضت: اغلق الصفحة، افحص التطبيقات، غيّر كلمات المرور وفعل 2FA.`;
  navigator.clipboard.writeText(text).then(()=> alert('تم نسخ نص التحذير!'));
};

/* رفع صور من المستخدم لاستخدامها كمثال (اختياري وصريح) */
fileInput.addEventListener('change', (ev) => {
  const files = Array.from(ev.target.files).slice(0,5); // حد أقصى 5 للعرض
  imgGrid.innerHTML = '';
  if (files.length === 0) {
    placeholderImages.forEach(u => addThumb(u));
  } else {
    files.forEach(file => {
      const reader = new FileReader();
      reader.onload = () => addThumb(reader.result);
      reader.readAsDataURL(file);
    });
  }
});

/* زر "استخدم صوري" يفتح نافذة رفع */
useMine.onclick = () => fileInput.click();

/* اضافة صورة مصغرة */
function addThumb(src) {
  const d = document.createElement('div');
  d.className = 'thumb';
  d.innerHTML = `<img src="${src}" style="width:100%;height:100%;object-fit:cover" />`;
  imgGrid.appendChild(d);
}

/* ملئ جدول المكالمات وادراج صور افتراضية */
function populateSimulation() {
  imgGrid.innerHTML = '';
  placeholderImages.forEach(u => addThumb(u));
  // If user uploaded, those are already added

  // calls
  callsTableBody.innerHTML = '';
  fakeCalls.forEach(c => {
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${c.name}</td><td>${c.number}</td><td>${c.type}</td><td>${c.duration}</td><td>${c.date}</td>`;
    callsTableBody.appendChild(tr);
  });
}

/* افعل المحاكاة الأولية لو المستخدم رفض الموافقة (عرض توضيحي فقط) */
populateSimulation();

</script>
</body>
</html>
