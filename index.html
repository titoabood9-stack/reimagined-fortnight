<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="utf-8" />
  <title>ุตูุญุฉ ูุนูููุงุช โ ุชูุนูุฉ</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body{font-family:Tahoma,Arial,Helvetica,sans-serif;direction:rtl;padding:16px;background:#f7f9fb;color:#222}
    .card{max-width:820px;margin:10px auto;background:#fff;padding:16px;border-radius:10px;box-shadow:0 6px 18px rgba(0,0,0,0.06)}
    h1{margin-top:0;color:#1b5e20}
    p{margin:6px 0}
    code{background:#f1f1f1;padding:4px 6px;border-radius:4px}
    #map{width:100%;height:300px;border-radius:8px;border:1px solid #e0e0e0;margin-top:10px;overflow:hidden}
    .row{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
    button{background:#1976d2;color:#fff;border:none;padding:10px 12px;border-radius:8px;cursor:pointer}
    button.secondary{background:#4caf50}
    button.ghost{background:#fff;color:#1976d2;border:1px solid #1976d2}
    small.note{display:block;color:#666;margin-top:8px}
    @media(max-width:520px){
      .row{flex-direction:column}
    }
  </style>
</head>
<body>
  <div class="card">
    <h1>๐ ุตูุญุฉ ุนุฑุถ ุงููุนูููุงุช (ุชุฌุฑุจุฉ ุขููุฉ)</h1>
    <p>ูุฐู ุงูุตูุญุฉ ุชุนุฑุถ ูุนูููุงุช ุนุงูุฉ ูุฑุณููุง ุงููุชุตูุญ โ ููุงุณุจุฉ ูุชุฌุงุฑุจ ุชูุนูุฉ ุนูู ุฌูุงุฒู ููุท.</p>

    <p><b>ุงููุชุตูุญ / ุงูุฌูุงุฒ:</b> <span id="ua">ุฌุงุฑู ุงูุชุญููู...</span></p>
    <p><b>ุนููุงู IP (ุนุงู):</b> <span id="ip">ุฌุงุฑู ุงูุชุญููู...</span></p>
    <p><b>ุงูููุช ูุงูุชุงุฑูุฎ:</b> <span id="time">ุฌุงุฑู ุงูุชุญููู...</span></p>
    <p><b>ุงููููุน (GPS):</b> <span id="location">ูู ููุญุฏุฏ ุจุนุฏ</span></p>

    <div id="map">๐บ๏ธ ุงูุฎุฑูุทุฉ ุณุชุธูุฑ ููุง ุจุนุฏ ูุจูู ุงููููุน</div>

    <div class="row" style="margin-top:12px">
      <button id="copyBtn">ุงูุณุฎ ูู ุงููุนูููุงุช</button>
      <button id="downloadBtn" class="secondary">ุชุญููู JSON</button>
      <button id="refreshBtn" class="ghost">ุชุญุฏูุซ ุงูุตูุญุฉ</button>
    </div>

    <small class="note">ููุงุญุธุฉ: ูุนุฑุถ ุงููููุน ูุฌุจ ุฃู ุชูุงูู ุทูุจ ุงูุฅุฐู ูู ุงููุชุตูุญ. ุฅุฐุง ุฑูุถุชุ ูู ุชุธูุฑ ุฅุญุฏุงุซูุงุช ุฃู ุงูุฎุฑูุทุฉ.</small>
  </div>

  <script>
    // ุนูุงุตุฑ DOM
    const uaEl = document.getElementById('ua');
    const ipEl = document.getElementById('ip');
    const timeEl = document.getElementById('time');
    const locEl = document.getElementById('location');
    const mapEl = document.getElementById('map');
    const copyBtn = document.getElementById('copyBtn');
    const downloadBtn = document.getElementById('downloadBtn');
    const refreshBtn = document.getElementById('refreshBtn');

    // ุจูุงูุงุช ุชูุฌูุน
    const info = {
      time: new Date().toISOString(),
      userAgent: navigator.userAgent || null,
      language: navigator.language || null,
      platform: navigator.platform || null,
      href: location.href,
      referrer: document.referrer || null,
      ip: null,
      screen: {
        width: screen.width,
        height: screen.height,
        availWidth: screen.availWidth || null,
        availHeight: screen.availHeight || null,
        colorDepth: screen.colorDepth || null
      },
      timezone: Intl.DateTimeFormat().resolvedOptions().timeZone || null,
      online: navigator.onLine,
      connection: {},
      battery: {},
      geo: null
    };

    // ุนุฑุถ User Agent ูููุช ุฃููู
    uaEl.innerText = info.userAgent;
    timeEl.innerText = new Date().toLocaleString();

    // ุชุญุฏูุซ ููุช ุจุดูู ูุจุงุดุฑ
    function updateTime() {
      timeEl.innerText = new Date().toLocaleString();
      info.time = new Date().toISOString();
    }
    setInterval(updateTime, 1000);

    // ุฌูุจ IP ุฎุงุฑุฌู (ุนุงู) ุนุจุฑ api.ipify.org
    fetch('https://api.ipify.org?format=json')
      .then(r => r.json())
      .then(d => {
        info.ip = d.ip || null;
        ipEl.innerText = d.ip || 'ุบูุฑ ูุชููุฑ';
      })
      .catch(e => {
        ipEl.innerText = 'ุฎุทุฃ ูู ุฌูุจ IP';
      });

    // ูุนูููุงุช ุงูุงุชุตุงู ุฅู ุชููุฑุช
    if (navigator.connection) {
      const c = navigator.connection;
      info.connection = {
        type: c.type || null,
        effectiveType: c.effectiveType || null,
        downlink: c.downlink || null,
        rtt: c.rtt || null,
        saveData: c.saveData || null
      };
    }

    // ูุนูููุงุช ุงูุจุทุงุฑูุฉ ุฅู ูุฏุนููุฉ
    if (navigator.getBattery) {
      navigator.getBattery().then(b => {
        info.battery = {
          charging: b.charging,
          level: b.level,
          chargingTime: b.chargingTime,
          dischargingTime: b.dischargingTime
        };
      }).catch(()=>{});
    }

    // ุงูุญุตูู ุนูู ุงููููุน ูุนุฑุถ ุงูุฎุฑูุทุฉ
    function handleGeoSuccess(pos) {
      const lat = pos.coords.latitude;
      const lon = pos.coords.longitude;
      info.geo = { latitude: lat, longitude: lon, accuracy: pos.coords.accuracy };
      locEl.innerText = `ุฎุท ุงูุนุฑุถ: ${lat.toFixed(6)}, ุฎุท ุงูุทูู: ${lon.toFixed(6)} (ุฏูุฉ โ ${pos.coords.accuracy} ู)`;
      mapEl.innerHTML = `<iframe width="100%" height="100%" style="border:0" src="https://maps.google.com/maps?q=${lat},${lon}&z=16&output=embed" allowfullscreen></iframe>`;
    }
    function handleGeoError(err) {
      locEl.innerText = '๐ซ ุฑูุถ ุงูุณูุงุญ ุจุงููููุน ุฃู ุฎุทุฃ ูู ุงูุญุตูู ุนูู ุงููููุน';
      mapEl.innerText = 'ูุง ูููู ุนุฑุถ ุงูุฎุฑูุทุฉ ุจุฏูู ุฅุฐู ุงููููุน.';
    }

    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(handleGeoSuccess, handleGeoError, {enableHighAccuracy:true, timeout:10000});
    } else {
      locEl.innerText = 'ุงููุชุตูุญ ูุง ูุฏุนู ุงููููุน ุงูุฌุบุฑุงูู';
      mapEl.innerText = 'ุงููุชุตูุญ ูุง ูุฏุนู ุฎุฑูุทุฉ ุงููููุน.';
    }

    // ุฏุงูุฉ ุจูุงุก ูุต ูุงุจู ูููุณุฎ
    function buildText() {
      const parts = [];
      parts.push('โ ูุนูููุงุช ุงูุฌูุงุฒ โ');
      parts.push('ุงูููุช (ISO): ' + (info.time || ''));
      parts.push('ุงูููุช ุงููุญูู: ' + new Date().toLocaleString());
      parts.push('User-Agent: ' + (info.userAgent || ''));
      parts.push('ุงููุบุฉ: ' + (info.language || ''));
      parts.push('ุงูููุตุฉ: ' + (info.platform || ''));
      parts.push('URL: ' + (info.href || ''));
      parts.push('Referrer: ' + (info.referrer || ''));
      parts.push('IP: ' + (info.ip || ''));
      parts.push(`ุงูุดุงุดุฉ: ${info.screen.width}x${info.screen.height}`);
      parts.push('Timezone: ' + (info.timezone || ''));
      if (info.connection && info.connection.effectiveType) {
        parts.push('ููุน ุงูุงุชุตุงู: ' + (info.connection.effectiveType || ''));
      }
      if (info.battery && typeof info.battery.level !== 'undefined') {
        parts.push('ุงูุจุทุงุฑูุฉ: ' + (info.battery.level * 100) + '% , ุดุญู: ' + info.battery.charging);
      }
      if (info.geo) {
        parts.push('ุงููููุน: ' + info.geo.latitude + ', ' + info.geo.longitude + ' (ุฏูุฉ: ' + info.geo.accuracy + ' ู)');
        parts.push('ุฎุฑูุทุฉ: https://www.google.com/maps?q=' + info.geo.latitude + ',' + info.geo.longitude);
      } else {
        parts.push('ุงููููุน: ุบูุฑ ูุชุงุญ/ูุฑููุถ');
      }
      return parts.join('\n');
    }

    // ุฒุฑ ุงููุณุฎ
    copyBtn.addEventListener('click', async () => {
      const text = buildText();
      if (navigator.clipboard && navigator.clipboard.writeText) {
        try {
          await navigator.clipboard.writeText(text);
          copyBtn.innerText = 'ุชู ุงููุณุฎ โ';
          setTimeout(()=> copyBtn.innerText = 'ุงูุณุฎ ูู ุงููุนูููุงุช', 1800);
        } catch(e) {
          fallbackCopy(text);
        }
      } else {
        fallbackCopy(text);
      }
    });

    // ูุณุฎ ุงุญุชูุงุทู ุนุจุฑ ุฅูุดุงุก textarea ูุคูุช
    function fallbackCopy(txt) {
      const ta = document.createElement('textarea');
      ta.value = txt;
      document.body.appendChild(ta);
      ta.select();
      try {
        document.execCommand('copy');
        copyBtn.innerText = 'ุชู ุงููุณุฎ โ';
        setTimeout(()=> copyBtn.innerText = 'ุงูุณุฎ ูู ุงููุนูููุงุช', 1800);
      } catch(e) {
        alert('ูุดู ุงููุณุฎ ุชููุงุฆูุงู โ ุงูุณุฎ ุงููุต ูุฏููุงู:\n\n' + txt);
      }
      document.body.removeChild(ta);
    }

    // ุฒุฑ ุชุญููู JSON
    downloadBtn.addEventListener('click', () => {
      const json = JSON.stringify(info, null, 2);
      const blob = new Blob([json], {type: 'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'device-info.json';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
      downloadBtn.innerText = 'ุชู ุงูุชุญููู โ';
      setTimeout(()=> downloadBtn.innerText = 'ุชุญููู JSON', 1600);
    });

    // ุฒุฑ ุชุญุฏูุซ ุณุฑูุน
    refreshBtn.addEventListener('click', () => location.reload());

  </script>
</body>
</html>
